/**
			* ConjureWP - WordPress Setup Wizard
						*
			* @version 1.0.0
			* @author ConjureWP
			* @link https://conjurewp.com/
			* @license GPLv3
			*/
(function(e){var t,n={install_child:function(e){(new a).init(e)},activate_license:function(e){(new r).init(e)},install_plugins:function(e){(new i).init(e)},install_content:function(e){(new s).init(e)}};function o(){var o=e(".conjure__body");e(".conjure__body--loading"),e(".conjure__body--exiting");var a,r,i=e("#conjure__drawer-trigger");t="conjure__drawer--open",setTimeout(function(){o.addClass("loaded");e(".js-conjure-drawer-import-content");e(".conjure__drawer--import-content__list-item").length},100),i.on("click",function(){o.toggleClass(t);e(".js-conjure-drawer-import-content");e(".conjure__drawer--import-content__list-item").length}),a=document.getElementById("server-health-header"),r=document.getElementById("server-health-info"),a&&r&&a.addEventListener("click",function(){r.classList.toggle("open")}),function(){var e=document.querySelector(".conjure__drawer--health-telemetry");if(!e)return;var t=null,n=3e4;function o(){conjure_params&&conjure_params.ajaxurl&&conjure_params.wpnonce&&jQuery.post(conjure_params.ajaxurl,{action:"conjure_get_health_metrics",wpnonce:conjure_params.wpnonce},function(t){if(t.success&&t.data){var n=t.data,o=e.querySelector(".health-metric-value-memory");if(o&&n.memory_limit){var a=n.memory_limit.formatted;n.memory_limit.meets_req||(a+=' <span class="metric-warning">(Min: '+n.memory_limit.min_required+"MB)</span>"),o.innerHTML=a,o.setAttribute("data-current",n.memory_limit.value)}var r=e.querySelector(".health-metric-value-execution");if(r&&n.max_execution){var i=n.max_execution.formatted;n.max_execution.meets_req||(i+=' <span class="metric-warning">(Min: '+n.max_execution.min_required+"s)</span>"),r.innerHTML=i,r.setAttribute("data-current",n.max_execution.value)}var s=e.querySelector(".health-metric-value-mysql");s&&n.mysql_version&&(s.textContent=n.mysql_version);var c=!0===n.meets_requirements||"1"===n.meets_requirements;e.setAttribute("data-health-status",c?"healthy":"warning");var l=e.querySelector(".health-indicator");l&&(l.className="health-indicator health-indicator--"+(c?"healthy":"warning"));var u=e.querySelector(".health-status-text");u&&(u.textContent=c?"Healthy":"Needs Attention");var d=e.querySelector(".health-remediation");if(d)if(n.remediation_links&&0!==n.remediation_links.length){d.style.display="block";var m=d.querySelector(".health-remediation-links");m&&(m.innerHTML="",n.remediation_links.forEach(function(e){var t=document.createElement("li"),n=document.createElement("a");n.href=e.url,n.target="_blank",n.rel="noopener noreferrer",n.className="health-remediation-link",n.setAttribute("data-bottleneck",e.type),n.textContent=e.title;var o=document.createElement("span");o.className="health-link-external",o.textContent="â†—",n.appendChild(o),t.appendChild(n),m.appendChild(t)}))}else d.style.display="none";var _=e.querySelector(".health-pulse");_&&(_.classList.add("pulse-active"),setTimeout(function(){_.classList.remove("pulse-active")},500))}}).fail(function(){})}o(),t=setInterval(o,n);var a=document.querySelector(".conjure__drawer--import-content");if(a){new MutationObserver(function(r){r.forEach(function(r){if("attributes"===r.type&&"class"===r.attributeName){var i=a.classList.contains("conjure__drawer--open");!i&&t?(clearInterval(t),t=null):i&&!t&&document.contains(e)&&(t=setInterval(o,n))}})}).observe(a,{attributes:!0,attributeFilter:["class"]})}window.addEventListener("beforeunload",function(){t&&clearInterval(t)})}(),document.addEventListener("click",function(e){var t=e.target.closest(".conjure__drawer--import-content__list-item");if(t&&!e.target.closest(".conjure__upload-zone")&&!e.target.closest("label")&&"INPUT"!==e.target.tagName){var n=t.querySelector(".js-conjure-upload-checkbox");n&&(e.preventDefault(),n.checked=!n.checked,n.dispatchEvent(new Event("change",{bubbles:!0})))}}),function(){var e=document.querySelectorAll(".conjure__upload-zone");if(0===e.length)return;document.querySelectorAll(".js-conjure-upload-checkbox").forEach(function(e){c(e),e.addEventListener("change",function(){c(e)})}),document.querySelectorAll(".conjure__upload-label").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("for"),o=document.getElementById(n),a=e.closest(".conjure__drawer--upload__item");o.disabled&&(t.preventDefault(),a.classList.toggle("conjure__drawer--upload__item--expanded"))})}),e.forEach(function(e){var t=e.getAttribute("data-type"),n=e.getAttribute("data-accept");e.addEventListener("click",function(o){if(!o.target.closest(".conjure__remove-file")&&!e.classList.contains("has-file")){o.preventDefault();var a=wp.media({title:"Select "+t+" file",button:{text:"Use this file"},multiple:!1});a.on("select",function(){var e=a.state().get("selection").first().toJSON();(function(e,t,n){if(!e||!e.filename)return l(n,"Invalid file selected."),!1;var o=e.filename.toLowerCase(),a=t.split(",").map(function(e){return e.trim()});if(!a.some(function(e){return o.endsWith(e)})){return l(n,"Invalid file type. Please select a file with one of these extensions: "+a.join(", ")),!1}return!0})(e,n,t)&&function(e,t){var n=document.querySelector('.conjure__upload-zone[data-type="'+t+'"]'),o=n.querySelector(".conjure__upload-progress"),a=n.querySelector(".conjure__upload-prompt"),r=n.querySelector(".conjure__upload-success");a.style.display="none",r.style.display="none",o.style.display="block";var i=new URLSearchParams;i.append("action","conjure_upload_from_media"),i.append("attachment_id",e.id),i.append("file_type",t),i.append("wpnonce",conjure_params.wpnonce),fetch(conjure_params.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()}).then(function(e){return e.json()}).then(function(e){if(e.success){n.classList.add("has-file"),o.style.display="none",n.querySelector(".conjure__file-name").textContent=e.data.filename,n.querySelector(".conjure__file-size").textContent=e.data.size,r.style.display="flex";var i=n.querySelector(".conjure__remove-file");i&&(i.style.display="inline-flex");var s=document.getElementById("default_content_"+t);s.disabled=!1,s.checked=!0,c(s,!0)}else o.style.display="none",a.style.display="flex",l(t,e.data.message||conjure_params.texts.something_went_wrong)}).catch(function(e){o.style.display="none",a.style.display="flex",l(t,"Upload failed: "+(e||conjure_params.texts.something_went_wrong))})}(e,t)}),a.open()}})}),document.addEventListener("click",function(e){e.target.closest(".conjure__remove-file")&&(e.preventDefault(),e.stopPropagation(),function(e){var t=document.querySelector('.conjure__upload-zone[data-type="'+e+'"]'),n=t.querySelector(".conjure__upload-prompt"),o=t.querySelector(".conjure__upload-success"),a=new URLSearchParams;a.append("action","conjure_delete_uploaded_file"),a.append("file_type",e),a.append("wpnonce",conjure_params.wpnonce),fetch(conjure_params.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()}).then(function(e){return e.json()}).then(function(a){if(a.success){t.classList.remove("has-file"),o.style.display="none",n.style.display="flex";var r=t.querySelector(".conjure__remove-file");r&&(r.style.display="none");var i=t.querySelector(".conjure__file-name");i&&(i.textContent="");var s=t.querySelector(".conjure__file-size");s&&(s.textContent="");var u=document.getElementById("default_content_"+e);if(!u)return;"1"===u.dataset.manualUpload?(u.disabled=!0,u.checked=!1,c(u,!1)):c(u,u.checked)}else l(e,a.data.message||conjure_params.texts.something_went_wrong)}).catch(function(t){l(e,"Failed to remove file: "+(t||conjure_params.texts.something_went_wrong))})}(e.target.closest(".conjure__remove-file").getAttribute("data-type")))})}(),e(".conjure__button--proceed:not(.conjure__button--closer)").click(function(e){e.preventDefault();var t=this.getAttribute("href");o.addClass("exiting"),setTimeout(function(){window.location=t},400)}),e(".conjure__button--closer").on("click",function(e){o.removeClass(t),e.preventDefault();var n=this.getAttribute("href");setTimeout(function(){o.addClass("exiting")},600),setTimeout(function(){window.location=n},1100)}),e(".button-next").on("click",function(t){if(t.preventDefault(),!function(e){var t=jQuery(e);if("yes"==t.data("done-loading"))return!1;return t.is("input")||t.is("button"),t.data("done-loading","yes"),t.addClass("conjure__button--loading"),t.prop("disabled",!0),{done:function(){t.prop("disabled",!1)}}}(this))return!1;var o=e(this).data("callback");return!o||void 0===n[o]||(n[o](this),!1)}),e(document).on("click",".js-conjure-demo-card-import",function(){var t=e(this),n=t.data("demo-index");null!=n&&(e(".js-conjure-demo-card-import").removeClass("is-selected"),t.addClass("is-selected"),e(".js-conjure-select-spinner").show(),e.post(conjure_params.ajaxurl,{action:"conjure_update_selected_import_data_info",wpnonce:conjure_params.wpnonce,selected_index:n},function(t){if(t.success){var n=t.data.import_info_html||t.data;e(".js-conjure-drawer-import-content").html(n),t.data.has_plugins&&t.data.demo_plugins&&(e(".js-conjure-drawer-import-content").data("demo-plugins",t.data.demo_plugins),console&&console.log)}else alert(conjure_params.texts.something_went_wrong);e(".js-conjure-select-spinner").hide()}).fail(function(){e(".js-conjure-select-spinner").hide(),alert(conjure_params.texts.something_went_wrong)}))}),e(document).on("click",".js-conjure-demo-card-plugins",function(){var t=e(this),n=t.data("demo-index");null!=n&&(e(".js-conjure-demo-card-plugins").removeClass("is-selected"),t.addClass("is-selected"),e.post(conjure_params.ajaxurl,{action:"conjure_update_selected_import_data_info",wpnonce:conjure_params.wpnonce,selected_index:n},function(e){e.success?window.location.reload():alert(conjure_params.texts.something_went_wrong)}).fail(function(){alert(conjure_params.texts.something_went_wrong)}))})}function a(){var n,o=e(".conjure__body"),a=e("#child-theme-text");function r(e){void 0!==e.done?(setTimeout(function(){a.addClass("lead")},0),setTimeout(function(){a.addClass("success"),a.html(e.message)},600),n()):(a.addClass("lead error"),a.html(e.error))}return{init:function(a){n=function(){setTimeout(function(){e(".conjure__body").addClass("js--finished")},1500),o.removeClass(t),setTimeout(function(){e(".conjure__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=a.href},4e3)},jQuery.post(conjure_params.ajaxurl,{action:"conjure_child_theme",wpnonce:conjure_params.wpnonce},r).fail(r)}}}function r(){var n,o=e(".conjure__body"),a=e(".conjure__content--license-key"),r=e("#license-text");function i(t){void 0!==t.success&&t.success?(r.siblings(".error-message").remove(),setTimeout(function(){r.addClass("lead")},0),setTimeout(function(){r.addClass("success"),r.html(t.message)},600),n()):(e(".js-conjure-license-activate-button").removeClass("conjure__button--loading").data("done-loading","no"),r.siblings(".error-message").remove(),a.addClass("has-error"),r.html(t.message),r.siblings(".error-message").addClass("lead error"))}return{init:function(r){n=function(){setTimeout(function(){e(".conjure__body").addClass("js--finished")},1500),o.removeClass(t),setTimeout(function(){e(".conjure__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=r.href},4e3)},a.removeClass("has-error"),jQuery.post(conjure_params.ajaxurl,{action:"conjure_activate_license",wpnonce:conjure_params.wpnonce,license_key:e(".js-license-key").val()},i).fail(i)}}}function i(){var n,o,a=e(".conjure__body"),r=0,i="",s="";function c(e){var t=o.find("label");"object"==typeof e&&void 0!==e.message?(t.removeClass("installing success error").addClass(e.message.toLowerCase()),void 0!==e.completed&&e.completed?(o&&!o.data("done_item")&&(r++,o.data("done_item",1)),n()):void 0!==e.done&&e.done?(o&&!o.data("done_item")&&(r++,o.data("done_item",1)),l()):void 0!==e.url?e.hash==s?(t.removeClass("installing success").addClass("error"),l()):(s=e.hash,jQuery.post(e.url,e,c).fail(c)):l()):(o&&!o.data("done_item")&&(r++,o.data("done_item",1)),l())}function l(){o&&(o.data("done_item")||(r++,o.data("done_item",1)),o.find(".spinner").css("visibility","hidden"));var t=e(".conjure__drawer--install-plugins li[data-slug]:not(.plugin-active)");t.each(function(){var t=e(this);return!!t.data("done_item")||(i=t.data("slug"),o=t,function(){if(i){var e=o.find("input:checkbox"),t=o.find("input[type=hidden]");e.length>0&&e.is(":checked")||t.length>0?jQuery.post(conjure_params.ajaxurl,{action:"conjure_install_plugin",wpnonce:conjure_params.wpnonce,slug:i},c).fail(c):(o.addClass("skipping"),setTimeout(l,300))}}(),!1)}),r>=t.length&&n()}return{init:function(o){e(".conjure__drawer--install-plugins").addClass("installing"),e(".conjure__drawer--install-plugins").find("input").prop("disabled",!0),n=function(){setTimeout(function(){e(".conjure__body").addClass("js--finished")},1e3),a.removeClass(t),setTimeout(function(){e(".conjure__body").addClass("exiting")},3e3),setTimeout(function(){window.location.href=o.href},3500)},l()}}}function s(){var n,o,a,r=e(".conjure__body"),i=0,s="",c="",l=1,u=0;function d(t){var n=o.find("label");if("object"==typeof t&&void 0!==t.message)if(n.addClass(t.message.toLowerCase()),void 0!==t.num_of_imported_posts&&0<u&&(l="all"===t.num_of_imported_posts?u:t.num_of_imported_posts,_()),void 0!==t.url)if(t.hash===c)n.addClass("status--failed"),m();else{if(c=t.hash,void 0===t.selected_index){var a=e(".js-conjure-demo-card-import.is-selected");t.selected_index=a.length?a.data("demo-index")||0:e(".js-conjure-demo-card-import").first().data("demo-index")||0}jQuery.post(t.url,t,d).fail(d)}else t.done,m();else n.addClass("status--error"),m()}function m(){var t=!1;o&&(o.data("done_item")||(i++,o.data("done_item",1)),o.find(".spinner").css("visibility","hidden"));var a=e(".conjure__drawer--import-content__list-item");e(".conjure__drawer--import-content__list-item input:checked"),a.each(function(){""==s||t?(s=e(this).data("content"),o=e(this),function(){if(s)if(o.find("input:checkbox").is(":checked")){var t=e(".js-conjure-demo-card-import.is-selected"),n=t.length?t.data("demo-index")||0:e(".js-conjure-demo-card-import").first().data("demo-index")||0;jQuery.post(conjure_params.ajaxurl,{action:"conjure_content",wpnonce:conjure_params.wpnonce,content:s,selected_index:n},d).fail(d)}else o.addClass("skipping"),setTimeout(m,300)}(),t=!1):e(this).data("content")==s&&(t=!0)}),i>=a.length&&n()}function _(){e(".js-conjure-progress-bar").css("width",l/u*100+"%");var t,n,o,r=(t=l/u*100,n=0,o=99,Math.min(o,Math.max(n,t)));e(".js-conjure-progress-bar-percentage").html(Math.round(r)+"%"),1===l/u&&clearInterval(a)}return{init:function(o){e(".conjure__drawer--import-content").addClass("installing"),e(".conjure__drawer--import-content").find("input").prop("disabled",!0),n=function(){var n=e(".js-conjure-demo-card-import.is-selected"),a=n.length?n.data("demo-index")||0:e(".js-conjure-demo-card-import").first().data("demo-index")||0;e.post(conjure_params.ajaxurl,{action:"conjure_import_finished",wpnonce:conjure_params.wpnonce,selected_index:a}),setTimeout(function(){e(".js-conjure-progress-bar-percentage").html("100%")},100),setTimeout(function(){r.removeClass(t)},500),setTimeout(function(){e(".conjure__body").addClass("js--finished")},1500),setTimeout(function(){e(".conjure__body").addClass("exiting")},3400),setTimeout(function(){window.location.href=o.href},4e3)},function(){if(!e(".conjure__drawer--import-content__list-item .checkbox-content").is(":checked"))return!1;var t=e(".js-conjure-demo-card-import.is-selected"),n=t.length?t.data("demo-index")||0:e(".js-conjure-demo-card-import").first().data("demo-index")||0;jQuery.post(conjure_params.ajaxurl,{action:"conjure_get_total_content_import_items",wpnonce:conjure_params.wpnonce,selected_index:n},function(e){0<(u=e.data)&&(_(),a=setInterval(function(){l+=u/500,_()},1e3))})}(),m()}}}function c(e,t){if(e){var n=e.closest(".conjure__drawer--upload__item");if(n)("boolean"==typeof t?t:e.checked)?n.classList.add("conjure__drawer--upload__item--expanded"):n.classList.remove("conjure__drawer--upload__item--expanded")}}function l(e,t){var n=document.querySelector('.conjure__upload-zone[data-type="'+e+'"]');if(n){var o=n.querySelector(".conjure__upload-error");o&&o.remove(),n.classList.add("conjure__upload-zone--error");var a=document.createElement("div");a.className="conjure__upload-error",a.textContent=t;var r=n.querySelector(".conjure__upload-prompt");r&&r.after(a),setTimeout(function(){a.style.opacity="0",a.style.transition="opacity 0.3s",setTimeout(function(){a.remove()},300),n.classList.remove("conjure__upload-zone--error")},5e3)}}return{init:function(){e(o)},callback:function(e){}}})(jQuery).init();
