/**
			* ConjureWP - WordPress Setup Wizard
						*
			* @version 1.0.0
			* @author ConjureWP
			* @link https://conjurewp.com/
			* @license GPLv3
			*/
(function(e){var n={install_child:function(e){(new t).init(e)},activate_license:function(e){(new i).init(e)},install_plugins:function(e){(new a).init(e)},install_content:function(e){(new r).init(e)}};function o(){var o=e(".conjure__body");e(".conjure__body--loading"),e(".conjure__body--exiting");var t=e("#conjure__drawer-trigger");drawer_opened="conjure__drawer--open",setTimeout(function(){o.addClass("loaded")},100),t.on("click",function(){o.toggleClass(drawer_opened)}),function(){var n=e(".conjure__upload-zone");if(0===n.length)return;e(".js-conjure-upload-checkbox").on("change",function(){var n=e(this),o=n.closest(".conjure__drawer--upload__item").find(".conjure__upload-zone");n.is(":checked")?o.slideDown(300):o.slideUp(300)}),e(".conjure__upload-label").on("click",function(n){var o=e(this),t=o.attr("for"),i=e("#"+t),a=o.closest(".conjure__drawer--upload__item"),r=a.find(".conjure__upload-zone");i.prop("disabled")&&(n.preventDefault(),r.is(":visible")?r.slideUp(300,function(){a.removeClass("conjure__drawer--upload__item--expanded")}):r.slideDown(300,function(){a.addClass("conjure__drawer--upload__item--expanded")}))}),n.each(function(){var n=e(this),o=n.data("type"),t=n.data("accept");n.on("click",function(i){if(!e(i.target).closest(".conjure__remove-file").length&&!n.hasClass("has-file")){i.preventDefault();var a=wp.media({title:"Select "+o+" file",button:{text:"Use this file"},multiple:!1});a.on("select",function(){var n=a.state().get("selection").first().toJSON();(function(e,n,o){if(!e||!e.filename)return s(o,"Invalid file selected."),!1;var t=e.filename.toLowerCase(),i=n.split(",").map(function(e){return e.trim()});if(!i.some(function(e){return t.endsWith(e)})){return s(o,"Invalid file type. Please select a file with one of these extensions: "+i.join(", ")),!1}return!0})(n,t,o)&&function(n,o){var t=e('.conjure__upload-zone[data-type="'+o+'"]'),i=t.find(".conjure__upload-progress"),a=t.find(".conjure__upload-prompt"),r=t.find(".conjure__upload-success");a.hide(),r.hide(),i.show(),jQuery.ajax({url:conjure_params.ajaxurl,type:"POST",data:{action:"conjure_upload_from_media",attachment_id:n.id,file_type:o,wpnonce:conjure_params.wpnonce},success:function(n){n.success?(t.addClass("has-file"),i.hide(),t.find(".conjure__file-name").text(n.data.filename),t.find(".conjure__file-size").text(n.data.size),r.show(),e("#default_content_"+o).prop("disabled",!1).prop("checked",!0)):(i.hide(),a.show(),s(o,n.data.message||conjure_params.texts.something_went_wrong))},error:function(e,n,t){i.hide(),a.show(),s(o,"Upload failed: "+(t||conjure_params.texts.something_went_wrong))}})}(n,o)}),a.open()}})}),e(document).on("click",".conjure__remove-file",function(n){n.preventDefault(),n.stopPropagation(),function(n){var o=e('.conjure__upload-zone[data-type="'+n+'"]'),t=o.find(".conjure__upload-prompt"),i=o.find(".conjure__upload-success");jQuery.ajax({url:conjure_params.ajaxurl,type:"POST",data:{action:"conjure_delete_uploaded_file",file_type:n,wpnonce:conjure_params.wpnonce},success:function(a){a.success?(o.removeClass("has-file"),i.hide(),t.show(),e("#default_content_"+n).prop("disabled",!0).prop("checked",!1)):s(n,a.data.message||conjure_params.texts.something_went_wrong)},error:function(e,o,t){s(n,"Failed to remove file: "+(t||conjure_params.texts.something_went_wrong))}})}(e(this).data("type"))})}(),e(".conjure__button--proceed:not(.conjure__button--closer)").click(function(e){e.preventDefault();var n=this.getAttribute("href");o.addClass("exiting"),setTimeout(function(){window.location=n},400)}),e(".conjure__button--closer").on("click",function(e){o.removeClass(drawer_opened),e.preventDefault();var n=this.getAttribute("href");setTimeout(function(){o.addClass("exiting")},600),setTimeout(function(){window.location=n},1100)}),e(".button-next").on("click",function(o){if(o.preventDefault(),!function(e){var n=jQuery(e);if("yes"==n.data("done-loading"))return!1;return n.is("input")||n.is("button"),n.data("done-loading","yes"),n.addClass("conjure__button--loading"),{done:function(){n.attr("disabled",!1)}}}(this))return!1;var t=e(this).data("callback");return!t||void 0===n[t]||(n[t](this),!1)}),e(document).on("change",".js-conjure-demo-import-select",function(){var n=e(this).val();e(".js-conjure-select-spinner").show(),e.post(conjure_params.ajaxurl,{action:"conjure_update_selected_import_data_info",wpnonce:conjure_params.wpnonce,selected_index:n},function(n){n.success?e(".js-conjure-drawer-import-content").html(n.data):alert(conjure_params.texts.something_went_wrong),e(".js-conjure-select-spinner").hide()}).fail(function(){e(".js-conjure-select-spinner").hide(),alert(conjure_params.texts.something_went_wrong)})})}function t(){var n,o=e(".conjure__body"),t=e("#child-theme-text");function i(e){void 0!==e.done?(setTimeout(function(){t.addClass("lead")},0),setTimeout(function(){t.addClass("success"),t.html(e.message)},600),n()):(t.addClass("lead error"),t.html(e.error))}return{init:function(t){n=function(){setTimeout(function(){e(".conjure__body").addClass("js--finished")},1500),o.removeClass(drawer_opened),setTimeout(function(){e(".conjure__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=t.href},4e3)},jQuery.post(conjure_params.ajaxurl,{action:"conjure_child_theme",wpnonce:conjure_params.wpnonce},i).fail(i)}}}function i(){var n,o=e(".conjure__body"),t=e(".conjure__content--license-key"),i=e("#license-text");function a(o){void 0!==o.success&&o.success?(i.siblings(".error-message").remove(),setTimeout(function(){i.addClass("lead")},0),setTimeout(function(){i.addClass("success"),i.html(o.message)},600),n()):(e(".js-conjure-license-activate-button").removeClass("conjure__button--loading").data("done-loading","no"),i.siblings(".error-message").remove(),t.addClass("has-error"),i.html(o.message),i.siblings(".error-message").addClass("lead error"))}return{init:function(i){n=function(){setTimeout(function(){e(".conjure__body").addClass("js--finished")},1500),o.removeClass(drawer_opened),setTimeout(function(){e(".conjure__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=i.href},4e3)},t.removeClass("has-error"),jQuery.post(conjure_params.ajaxurl,{action:"conjure_activate_license",wpnonce:conjure_params.wpnonce,license_key:e(".js-license-key").val()},a).fail(a)}}}function a(){var n,o,t=e(".conjure__body"),i=0,a="",r="";function s(e){var n=o.find("label");"object"==typeof e&&void 0!==e.message?(n.removeClass("installing success error").addClass(e.message.toLowerCase()),void 0!==e.done&&e.done?u():void 0!==e.url?e.hash==r?(n.removeClass("installing success").addClass("error"),u()):(r=e.hash,jQuery.post(e.url,e,s).fail(s)):u()):c()}function c(){a&&(o.find("input:checkbox").is(":checked")?jQuery.post(conjure_params.ajaxurl,{action:"conjure_plugins",wpnonce:conjure_params.wpnonce,slug:a},s).fail(s):(o.addClass("skipping"),setTimeout(u,300)))}function u(){o&&(o.data("done_item")||(i++,o.data("done_item",1)),o.find(".spinner").css("visibility","hidden"));var t=e(".conjure__drawer--install-plugins li");t.each(function(){var n=e(this);return!!n.data("done_item")||(a=n.data("slug"),o=n,c(),!1)}),i>=t.length&&n()}return{init:function(o){e(".conjure__drawer--install-plugins").addClass("installing"),e(".conjure__drawer--install-plugins").find("input").prop("disabled",!0),n=function(){setTimeout(function(){e(".conjure__body").addClass("js--finished")},1e3),t.removeClass(drawer_opened),setTimeout(function(){e(".conjure__body").addClass("exiting")},3e3),setTimeout(function(){window.location.href=o.href},3500)},u()}}}function r(){var n,o,t,i=e(".conjure__body"),a=0,r="",s="",c=1,u=0;function d(n){var t=o.find("label");"object"==typeof n&&void 0!==n.message?(t.addClass(n.message.toLowerCase()),void 0!==n.num_of_imported_posts&&0<u&&(c="all"===n.num_of_imported_posts?u:n.num_of_imported_posts,_()),void 0!==n.url?n.hash===s?(t.addClass("status--failed"),l()):(s=n.hash,void 0===n.selected_index&&(n.selected_index=e(".js-conjure-demo-import-select").val()||0),jQuery.post(n.url,n,d).fail(d)):(n.done,l())):(t.addClass("status--error"),l())}function l(){var t=!1;o&&(o.data("done_item")||(a++,o.data("done_item",1)),o.find(".spinner").css("visibility","hidden"));var i=e(".conjure__drawer--import-content__list-item");e(".conjure__drawer--import-content__list-item input:checked"),i.each(function(){""==r||t?(r=e(this).data("content"),o=e(this),r&&(o.find("input:checkbox").is(":checked")?jQuery.post(conjure_params.ajaxurl,{action:"conjure_content",wpnonce:conjure_params.wpnonce,content:r,selected_index:e(".js-conjure-demo-import-select").val()||0},d).fail(d):(o.addClass("skipping"),setTimeout(l,300))),t=!1):e(this).data("content")==r&&(t=!0)}),a>=i.length&&n()}function _(){e(".js-conjure-progress-bar").css("width",c/u*100+"%");var n,o,i,a=(n=c/u*100,o=0,i=99,Math.min(i,Math.max(o,n)));e(".js-conjure-progress-bar-percentage").html(Math.round(a)+"%"),1===c/u&&clearInterval(t)}return{init:function(o){e(".conjure__drawer--import-content").addClass("installing"),e(".conjure__drawer--import-content").find("input").prop("disabled",!0),n=function(){e.post(conjure_params.ajaxurl,{action:"conjure_import_finished",wpnonce:conjure_params.wpnonce,selected_index:e(".js-conjure-demo-import-select").val()||0}),setTimeout(function(){e(".js-conjure-progress-bar-percentage").html("100%")},100),setTimeout(function(){i.removeClass(drawer_opened)},500),setTimeout(function(){e(".conjure__body").addClass("js--finished")},1500),setTimeout(function(){e(".conjure__body").addClass("exiting")},3400),setTimeout(function(){window.location.href=o.href},4e3)},function(){if(!e(".conjure__drawer--import-content__list-item .checkbox-content").is(":checked"))return!1;jQuery.post(conjure_params.ajaxurl,{action:"conjure_get_total_content_import_items",wpnonce:conjure_params.wpnonce,selected_index:e(".js-conjure-demo-import-select").val()||0},function(e){0<(u=e.data)&&(_(),t=setInterval(function(){c+=u/500,_()},1e3))})}(),l()}}}function s(n,o){var t=e('.conjure__upload-zone[data-type="'+n+'"]');t.find(".conjure__upload-error").remove(),t.addClass("conjure__upload-zone--error");var i=e('<div class="conjure__upload-error">'+o+"</div>");t.find(".conjure__upload-prompt").after(i),setTimeout(function(){i.fadeOut(300,function(){e(this).remove()}),t.removeClass("conjure__upload-zone--error")},5e3)}return{init:function(){e(o)},callback:function(e){}}})(jQuery).init();
